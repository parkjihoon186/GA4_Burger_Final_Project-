# GA4 실습 4일차: 웹 & 앱 실행 환경 구축 회고록

이번 4일차까지 정적 웹사이트와 Flutter 앱, 두 가지 다른 환경의 프로젝트를 로컬에서 실행하는 과정에서 발생한 복잡한 문제들을 해결했습니다. 이 문서는 각 문제의 원인을 진단하고, 해결하기까지의 과정과 그 속에서 마주한 핵심 개발 용어들을 상세히 정리한 기술 회고록입니다.

---

## Part 1: 버거 웹사이트 (정적 HTML) 실행 오류

가장 먼저 부딪힌 문제는 단순해 보였던 "localhost 연결 에러"였습니다. 이 문제는 코드 자체의 오류와 실행 환경에 대한 이해 부족이 겹쳐 발생했습니다.

### 🎯 문제 상황

`index.html` 파일을 브라우저로 열었을 때, 페이지가 깨지거나 기능이 동작하지 않으며 "localhost 에러"라고 인식되는 현상이 발생했습니다.

### 🧐 원인 분석 및 해결 과정

#### 1. 코드 레벨의 오류: 잘못된 외부 자원 참조

*   **진단:** 브라우저 개발자 도구(F12)의 콘솔을 확인한 결과, 특정 JavaScript 파일을 불러오지 못해 `404 Not Found` 에러가 발생하고 있었습니다.
    *   **오류 코드:** `<script src="https://code.googles-apis.com/materialized.js"></script>`
    *   **문제점:** `googles-apis.com`은 존재하지 않는 주소였습니다. 이는 외부 라이브러리를 가져오는 **CDN** 주소의 오타였습니다.
*   **해결:**
    1.  잘못된 스크립트 태그를 삭제하고, 프로젝트에 필요한 다른 유효한 스크립트만 남겨두었습니다.
    2.  이 과정에서 불필요하게 두 번 로드되던 `jQuery` 라이브러리도 하나로 정리하여 코드 품질을 개선했습니다.

#### 2. 실행 환경 레벨의 오류: 웹 서버의 부재

*   **진단:** 코드를 수정했음에도 "localhost 연결이 안 된다"는 문제가 지속되었습니다. 이는 `http://localhost` 주소로 접속을 시도했기 때문입니다. `localhost`는 **웹 서버**가 실행 중일 때만 유효한 주소입니다.
*   **해결:**
    1.  VS Code의 확장 프로그램인 **`Live Server`**를 설치했습니다.
    2.  `index.html` 파일에서 마우스 오른쪽 버튼을 클릭하여 **`Open with Live Server`**로 실행했습니다.
    3.  `Live Server`가 자동으로 웹 서버를 구동하고, `http://127.0.0.1:5500` 과 같은 유효한 주소로 브라우저를 열어주어 문제를 완전히 해결했습니다.

### 📚 관련 핵심 용어 (HTML)

*   **`localhost` (로컬호스트):** '내 컴퓨터 자신'을 가리키는 특별한 주소(IP: 127.0.0.1). 웹 서버가 내 컴퓨터에서 실행될 때, 이 주소를 통해 접속할 수 있습니다.
*   **웹 서버 (Web Server):** `Live Server`와 같이, HTML, CSS, JS 같은 파일들을 요청한 브라우저에게 '제공(serving)'해주는 소프트웨어. 웹 서버가 없으면 `localhost` 주소는 의미가 없습니다.
*   **CDN (Content Delivery Network):** `jQuery`나 `Bootstrap` 같은 공용 라이브_러리를 내 서버가 아닌, 전 세계에 분산된 전문 서버에서 빠르게 가져올 수 있도록 하는 서비스.

---

## Part 2: Flutter 데모 앱 실행 오류

Flutter 앱은 웹사이트보다 훨씬 복잡한 빌드 및 실행 과정을 거치며, 여러 단계에 걸쳐 문제가 발생했습니다.

### 🎯 문제 상황

`F5` 키를 눌러 Flutter 앱을 실행했을 때, 빌드가 실패하거나 브라우저에서 "연결 거부" 오류가 발생하고, `Hot Restart` 시 개발 도구와 통신 오류가 발생하는 등 복합적인 문제가 나타났습니다.

### 🧐 원인 분석 및 해결 과정

#### 1. 환경 변수 설정 오류: `.env` 파일 참조 실패

*   **진단:** `main.dart` 파일의 `await dotenv.load(fileName: ".env");` 코드는 앱 실행에 필요한 **API 키** 같은 민감한 정보를 `.env` 파일에서 읽어오라는 의미입니다. 이 파일이 없거나 잘못 설정되면 앱이 시작조차 할 수 없습니다.
*   **해결:**
    1.  `my_first_app` 폴더 내에 `.env` 파일을 정확한 위치에 생성했습니다.
    2.  Firebase 프로젝트에서 발급받은 웹 앱의 설정 값들을 `.env` 파일에 키-값 형태로 저장했습니다.
    3.  `.gitignore` 파일에 `.env`를 추가하여 민감한 정보가 Git 저장소에 올라가지 않도록 **보안 원칙**을 준수했습니다.

#### 2. 비동기 처리 순서 오류: Firebase 초기화 실패

*   **진단:** `.env` 파일을 올바르게 설정했음에도 앱이 실행되지 않았습니다. 이는 **비동기(Asynchronous)** 처리 순서 문제였습니다. `Firebase.initializeApp()` 함수가 `.env` 파일 로딩이 끝나기를 기다리지 않고 먼저 실행되어, 필요한 설정 값을 전달받지 못했습니다.
*   **해결:** `main.dart`의 `main` 함수를 수정하여, `.env`에서 읽어온 값들을 변수에 담고, 이 변수들을 `FirebaseOptions` 객체에 명시적으로 담아 `Firebase.initializeApp()` 함수에 전달했습니다. 이로써 실행 순서를 보장했습니다.

#### 3. 실행 구성(Launch Configuration) 오류: 포트 불일치

*   **진단:** "localhost 연결 거부" 문제의 원인은 VS Code의 실행 설정 파일인 `launch.json`에 있었습니다.
    *   **Flutter 서버:** `F5`로 실행 시, **무작위로 남는 포트**(예: `51234`)를 사용합니다.
    *   **기존 `launch.json`:** 브라우저를 **고정된 `8080` 포트**로 열도록 설정되어 있었습니다.
    *   서버가 열린 포트와 브라우저가 접속하려는 포트가 달라 연결이 거부된 것입니다.
*   **해결:** `launch.json` 파일의 내용을 수정하여, 특정 URL로 Chrome을 실행하는 대신 Flutter 프로젝트를 `dart` 타입으로 직접 실행하도록 변경했습니다. 이 설정은 VS Code가 Flutter가 사용하는 실제 포트를 자동으로 감지하여 브라우저를 열어주므로 문제를 근본적으로 해결합니다.

#### 4. 개발 도구 통신 오류: `Hot Restart` 시 `DWDS` 에러

*   **진단:** `Hot Restart` 시 `Unexpected DWDS error... Unexpected null value` 라는 통신 오류가 발생했습니다. 이는 `main` 함수 내의 비동기 초기화 작업(`dotenv.load`, `Firebase.initializeApp`)과 개발 도구의 연결 시도 간의 **경쟁 상태(Race Condition)** 때문이었습니다. 개발 도구가 앱의 초기화 완료를 기다리지 않고 연결을 시도하여 통신 오류가 발생한 것입니다.
*   **해결:** Flutter의 표준 초기화 패턴인 `FutureBuilder`를 도입하여 앱의 구조를 안정적으로 리팩토링했습니다.
    1.  `main` 함수는 `runApp()`만 즉시 호출하도록 단순화했습니다.
    2.  `MyApp` 위젯을 `StatefulWidget`으로 전환했습니다.
    3.  `FutureBuilder`를 사용하여 Firebase 초기화가 완료될 때까지는 로딩 화면을 표시하고, 초기화가 성공적으로 끝난 후에만 실제 앱 화면을 렌더링하도록 변경했습니다. 이로써 개발 도구와의 연결 안정성을 확보했습니다.

### 📚 관련 핵심 용어 (Flutter)

*   **`.env`:** 데이터베이스 비밀번호나 API 키처럼 코드에 직접 하드코딩하면 안 되는 민감한 정보(환경 변수)를 저장하는 파일.
*   **API 키 (API Key):** 특정 서비스(여기서는 Firebase)를 사용할 권한이 있음을 증명하는 비밀 열쇠.
*   **비동기 처리 (Asynchronous Programming):** 파일 로딩이나 네트워크 통신처럼 시간이 걸리는 작업을 기다리는 동안 다른 작업을 계속 처리하는 프로그래밍 방식. Flutter/Dart에서는 `async`/`await` 키워드를 사용합니다.
*   **`launch.json`:** VS Code에서 디버깅 세션을 시작(`F5`)할 때 사용하는 설정 파일. 어떤 프로그램을 어떻게 실행할지 정의합니다.
*   **포트 (Port):** 하나의 IP 주소(컴퓨터) 내에서 여러 네트워크 프로그램들을 구분하기 위한 번호. (예: 웹 서버는 80번, Live Server는 5500번)
*   **`Hot Restart`:** 앱의 상태를 모두 초기화하고 전체를 다시 시작하는 기능. 코드 구조 변경 시 사용됩니다.
*   **`DWDS (Dart DevTools Web Service)`:** Flutter 웹 앱을 디버깅할 때, 브라우저 개발자 도구와 Dart VM 간의 통신을 중계하는 프록시 서버.
*   **경쟁 상태 (Race Condition):** 두 개 이상의 프로세스나 스레드가 공유 자원에 접근하려고 경쟁하는 상태. 여기서는 개발 도구와 앱 초기화 코드가 경쟁했습니다.
*   **`FutureBuilder`:** `Future`(비동기 작업)의 상태 변화(로딩, 완료, 에러)에 따라 다른 UI를 그려주는 매우 유용한 Flutter 위젯. 비동기 초기화의 표준 해결책입니다.

---

## 🌟 최종 교훈

1.  **"안된다"의 원인은 다양하다:** 단순한 "연결 에러" 뒤에는 코드, 실행 환경, 설정 파일, 심지어 도구 간의 통신 타이밍 문제까지 복합적인 원인이 얽혀있을 수 있다. 단계적으로 의심 영역을 좁혀나가는 체계적인 접근이 중요하다.
2.  **공식적인 실행 방법과 패턴을 따르자:** 모든 프레임워크(Live Server, Flutter)는 고유의 실행 방식과 권장하는 코드 패턴(`FutureBuilder` 등)을 가지고 있다. 이를 무시하고 임의의 방식으로 실행하면 예상치 못한 문제에 부딪힌다.
3.  **보안은 기본이다:** `.env`를 활용하여 민감 정보를 분리하고 `.gitignore`로 관리하는 것은 협업과 배포의 가장 기본적인 보안 수칙이다.
